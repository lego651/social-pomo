(window["webpackJsonpsocial-pomo"]=window["webpackJsonpsocial-pomo"]||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),s=n(19),i=(n(74),n(17)),u=n(11),l=n(20),m=n(21),h=n(22),d=n(29),f=n.n(d),p={LOG_IN:"LOG_IN",GET_MESSAGES:"GET_MESSAGES"},b=(n(91),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).state={username:""},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({username:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.state.username.trim().length>0&&this.props.loginUser(this.state.username)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"login-form"},r.a.createElement("form",{id:"serUsername",onSubmit:function(t){e.handleSubmit(t)}},r.a.createElement("input",{type:"text",className:"username",name:"username",placeholder:"Type your username...",onChange:function(t){e.handleChange(t)}}),r.a.createElement("input",{type:"submit",className:"submit-button",value:"Join the DoorDash Chat!"}))))}}]),t}(a.Component)),y=Object(s.b)(null,(function(e){return{loginUser:function(t){return e(function(e){return function(t){return t({type:p.LOG_IN,username:e})}}(t))}}}))(b),v=n(133),O=n(135),g=n(39);n(101);g.initializeApp({apiKey:"AIzaSyBuRc03LvtY55WHAkzyUfaNInvRPsp5Enc",authDomain:"social-pomo-94112.firebaseapp.com",databaseURL:"https://social-pomo-94112.firebaseio.com",projectId:"social-pomo-94112",storageBucket:"social-pomo-94112.appspot.com",messagingSenderId:"105418250972"}),g.firestore().settings({timestampsInSnapshots:!0});var j=g,E=(n(102),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).subscribeReadyCount=function(e){n.setState({readyCount:e.data().readyCount}),2===e.data().readyCount&&n.handleStart(),0===e.data().readyCount&&n.handleReset()},n.ref=j.firestore().collection("meta").doc("us"),n.unsubsrcibe=null,n.state={sec:10,ready:!1,readyCount:0,on:!1},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"count",value:function(){this.state.on?this.state.sec>0&&this.setState((function(e){return{sec:e.sec-1}})):this.setState({sec:0,on:!1})}},{key:"handleStart",value:function(){var e=this;this.setState({on:!0}),this.interval=setInterval((function(){e.count()}),1e3)}},{key:"handleReset",value:function(){this.setState({sec:10,on:!1}),clearInterval(this.interval)}},{key:"getReady",value:function(){var e=this;f.a.get("/readyaddone").then((function(t){e.setState({ready:!0})})).catch((function(e){console.log(e)}))}},{key:"getReset",value:function(){var e=this;f.a.get("/readyminusone").then((function(t){e.setState({ready:!1})})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.unsubscribe=this.ref.onSnapshot(this.subscribeReadyCount)}},{key:"render",value:function(){var e,t=this;return console.log(this.state.readyCount),r.a.createElement("div",{className:"pomodoro-container"},r.a.createElement("h2",null," ",(e=this.state.sec,Math.floor(e/60)+" : "+Math.round(e%60))," "),0===this.state.readyCount?r.a.createElement(O.a,{variant:"contained",color:"primary",onClick:function(){t.getReady()}},"Ready!"):1===this.state.readyCount?this.state.on&&this.state.ready?r.a.createElement(O.a,{variant:"contained",color:"primary",onClick:function(){t.getReset()}},"Continue"):0!=this.state.on||this.state.ready?r.a.createElement(O.a,{variant:"contained",color:"primary"},"Waiting..."):r.a.createElement(O.a,{variant:"contained",color:"primary",onClick:function(){t.getReady()}},"Ready!"):r.a.createElement(O.a,{variant:"contained",color:"primary",onClick:function(){t.getReset()}},"Continue"))}}]),t}(a.Component)),S=n(16),w=(n(103),n(134)),k=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).onUpdateMessages=function(e){var t=[];e.forEach((function(e){t.push({userHandle:e.data().userHandle,content:e.data().content,createdAt:e.data().createdAt})})),n.setState({messages:t})},n.ref=j.firestore().collection("messages"),n.unsubscribe=null,n.state={messages:[],content:""},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={userHandle:this.props.username,content:this.state.content};this.props.addMessage(t),this.setState({content:""})}},{key:"componentDidMount",value:function(){this.unsubscribe=this.ref.orderBy("createdAt").onSnapshot(this.onUpdateMessages)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"chatroom-container"},this.state.messages.map((function(e){return r.a.createElement("div",{key:e.messageId}," ",e.content," ")})),r.a.createElement("div",{className:"chatroom-input"},r.a.createElement("form",{onSubmit:function(t){e.handleSubmit(t)}},r.a.createElement(w.a,{type:"text",name:"content",label:"content",onChange:function(t){e.handleChange(t)},value:this.state.content,fullWidth:!0}),r.a.createElement(O.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))}}]),t}(a.Component),C=Object(s.b)((function(e){return{username:e.auth.username}}),(function(e){return{addMessage:function(t){return e(function(e){return function(t){f.a.post("/message",e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}}(t))}}}))(k),D=(n(104),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"room-container"},r.a.createElement(v.a,{container:!0,spacing:2},r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement(E,null)),r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement(C,null))))}}]),t}(a.Component));f.a.defaults.baseURL="https://us-central1-social-pomo-94112.cloudfunctions.net/api";var _=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.username;return r.a.createElement("div",{className:"app-container"},e?r.a.createElement(D,null):r.a.createElement(y,null))}}]),t}(a.Component),N=Object(s.b)((function(e){return{username:e.auth.username}}))(_);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=n(27),P=n(60);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach((function(t){Object(S.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G={username:null},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.LOG_IN:return M({},e,{username:t.username});default:return e}};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(S.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={messages:[]},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.GET_MESSAGES:return L({},e,{messages:t.payload});default:return e}},B=Object(R.c)({auth:U,room:x}),W=Object(R.e)(B,Object(R.d)(Object(R.a)(P.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));c.a.render(r.a.createElement(s.a,{store:W},r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},65:function(e,t,n){e.exports=n(105)},74:function(e,t,n){},91:function(e,t,n){}},[[65,1,2]]]);
//# sourceMappingURL=main.4c3da93e.chunk.js.map